<!DOCTYPE html>
<html data-wf-page="68269b7c12f8a3ad86be7f60" data-wf-site="68269b7b12f8a3ad86be7d56">
<head>
  <meta charset="utf-8">
  <title>Sillas RAPER - Colección Exclusiva</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta name="format-detection" content="telephone=no">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/raper-2.webflow.css" rel="stylesheet" type="text/css">
  <link href="css/store.css" rel="stylesheet" type="text/css">
  <link href="css/cart.css" rel="stylesheet" type="text/css">
  <link href="css/theme.css" rel="stylesheet" type="text/css">
  <link href="css/mobile-fixes.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]  }});</script>
  <link href="https://res.cloudinary.com/dt5pkdr0k/image/upload/v1747379718/fabicon_2_1_j76m5a.png" rel="shortcut icon" type="image/x-icon">
  
  <!-- ===== FIX CRÍTICO PARA IPHONE - ANTI-DETECCIÓN TELÉFONOS ===== -->
  <style>
    /* Forzar que los números de teléfono NO sean detectados como enlaces */
    .footer-contact .phone,
    .mobile-menu-contact .phone,
    span.phone {
      color: rgba(255, 255, 255, 0.8) !important;
      text-decoration: none !important;
      -webkit-text-decoration: none !important;
      -webkit-text-decoration-line: none !important;
      text-decoration-line: none !important;
      -webkit-text-decoration-color: transparent !important;
      text-decoration-color: transparent !important;
      -webkit-appearance: none !important;
      appearance: none !important;
      font-weight: 500 !important;
      letter-spacing: 0.05em !important;
      pointer-events: none !important;
      -webkit-touch-callout: none !important;
      -webkit-user-select: none !important;
      user-select: none !important;
    }
    
    /* Estados de hover/focus/active - Mantener estilo consistente */
    .footer-contact .phone:hover,
    .footer-contact .phone:focus,
    .footer-contact .phone:active,
    .footer-contact .phone:link,
    .footer-contact .phone:visited,
    .mobile-menu-contact .phone:hover,
    .mobile-menu-contact .phone:focus,
    .mobile-menu-contact .phone:active,
    .mobile-menu-contact .phone:link,
    .mobile-menu-contact .phone:visited {
      color: rgba(95, 164, 255, 0.9) !important;
      text-decoration: none !important;
      -webkit-text-decoration: none !important;
      -webkit-text-decoration-line: none !important;
      text-decoration-line: none !important;
      border: none !important;
      outline: none !important;
    }
    
    /* Container anti-detección */
    .contact-item {
      -webkit-touch-callout: none !important;
      -webkit-user-select: none !important;
      user-select: none !important;
    }
    
    /* iOS Safari específico - Regla ultra-agresiva */
    @supports (-webkit-touch-callout: none) {
      .footer-contact .phone,
      .mobile-menu-contact .phone {
        color: rgba(255, 255, 255, 0.8) !important;
        text-decoration: none !important;
        -webkit-text-decoration: none !important;
        -webkit-text-decoration-line: none !important;
        text-decoration-line: none !important;
        -webkit-text-decoration-color: transparent !important;
        text-decoration-color: transparent !important;
        -webkit-appearance: none !important;
        appearance: none !important;
        border: none !important;
        outline: none !important;
        box-shadow: none !important;
        background: transparent !important;
      }
    }
  </style>
</head>
<body>
  <div class="page-wrapper is-relative">
    <!-- Banner de Sello Discográfico -->
    <div class="record-label-banner">
      <div class="container-large">
        <p class="record-label-text">SELLO DISCOGRÁFICO RAPER COMPANY</p>
      </div>
    </div>

    <div class="global-styles w-embed">
      <style>
        :root { font-size: 62.5%; }
        body { font-size: 1.6rem; background: #000; }

        .record-label-banner {
          width: 100%;
          background: linear-gradient(90deg, rgba(0,0,0,0.9) 0%, rgba(95, 164, 255, 0.2) 50%, rgba(0,0,0,0.9) 100%);
          padding: 10px 0;
          position: relative;
          z-index: 100;
          border-bottom: 1px solid rgba(95, 164, 255, 0.3);
        }

        .record-label-text {
          text-align: center;
          color: #fff;
          font-size: 1.4rem;
          font-weight: 600;
          letter-spacing: 0.2em;
          text-transform: uppercase;
          margin: 0;
          text-shadow: 0 0 10px rgba(95, 164, 255, 0.5);
          animation: glow 3s ease-in-out infinite alternate;
        }

        @keyframes glow {
          0% { text-shadow: 0 0 5px rgba(95, 164, 255, 0.5); }
          100% { text-shadow: 0 0 15px rgba(95, 164, 255, 0.8), 0 0 20px rgba(95, 164, 255, 0.4); }
        }

        /* ===== MENÚ MÓVIL - USANDO CSS EXTERNO COMO STORE.HTML ===== */
        
        /* ===== MENÚ MÓVIL - CSS COMPLETO ===== */
        .mobile-menu-toggle {
          display: none;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          width: 45px;
          height: 45px;
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(255, 255, 255, 0.2);
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.3s ease;
          padding: 0.5rem;
        }

        .mobile-menu-toggle:hover {
          background: rgba(95, 164, 255, 0.2);
          border-color: rgba(95, 164, 255, 0.5);
        }

        .mobile-menu-toggle.active {
          background: rgba(95, 164, 255, 0.3);
          border-color: rgba(95, 164, 255, 0.7);
        }

        .hamburger-line {
          width: 25px;
          height: 3px;
          background: #fff;
          margin: 2px 0;
          transition: all 0.3s ease;
          border-radius: 2px;
        }

        .mobile-menu-toggle.active .hamburger-line:nth-child(1) {
          transform: rotate(45deg) translate(6px, 6px);
        }

        .mobile-menu-toggle.active .hamburger-line:nth-child(2) {
          opacity: 0;
        }

        .mobile-menu-toggle.active .hamburger-line:nth-child(3) {
          transform: rotate(-45deg) translate(7px, -6px);
        }

        .mobile-menu {
          position: fixed;
          top: 0;
          right: -100%;
          width: 100%;
          height: 100vh;
          background: rgba(0, 0, 0, 0.95);
          backdrop-filter: blur(10px);
          z-index: 9999;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
          padding: 2rem;
        }

        .mobile-menu.active {
          right: 0;
        }

        .mobile-menu-links {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 2rem;
          margin-bottom: 3rem;
        }

        .mobile-menu-link {
          color: #fff;
          font-size: 2rem;
          font-weight: 600;
          text-decoration: none;
          text-transform: uppercase;
          letter-spacing: 0.1em;
          transition: all 0.3s ease;
          padding: 1rem 2rem;
          border: 2px solid transparent;
          border-radius: 8px;
        }

        .mobile-menu-link:hover {
          color: rgba(95, 164, 255, 1);
          border-color: rgba(95, 164, 255, 0.5);
          background: rgba(95, 164, 255, 0.1);
        }

        .mobile-menu-contact {
          display: flex;
          flex-direction: column;
          gap: 1rem;
          align-items: center;
        }

        .contact-item {
          display: flex;
          align-items: center;
          gap: 1rem;
          color: rgba(255, 255, 255, 0.8);
          font-size: 1.6rem;
          font-weight: 500;
        }

        .flag {
          font-size: 2rem;
        }

        .phone {
          color: rgba(255, 255, 255, 0.8) !important;
          text-decoration: none !important;
          font-weight: 500;
          letter-spacing: 0.05em;
        }

        /* ===== RESPONSIVE - MOSTRAR MENÚ HAMBURGUESA EN MÓVIL ===== */
        @media (max-width: 768px) {
          .nav-links {
            display: none !important;
          }
          
          .mobile-menu-toggle {
            display: flex !important;
          }
        }

        @media (min-width: 769px) {
          .mobile-menu-toggle {
            display: none !important;
          }
          
          .mobile-menu {
            display: none !important;
          }
        }

        /* ===== DISEÑO VERTICAL DOS COLUMNAS ===== */
        .sillas-grid-section {
          background: #000;
          min-height: 100vh;
          padding: 6rem 2rem 4rem 2rem;
        }

        .sillas-grid-container {
          max-width: 800px;
          margin: 0 auto;
        }

        .sillas-grid-header {
          text-align: center;
          margin-bottom: 4rem;
        }

        .sillas-grid-title {
          font-size: 3.2rem;
          font-weight: 700;
          color: #fff;
          margin-bottom: 2rem;
          text-transform: uppercase;
          letter-spacing: 0.1em;
        }

        .sillas-grid-subtitle {
          font-size: 1.6rem;
          color: #888;
          max-width: 600px;
          margin: 0 auto;
          line-height: 1.6;
        }

        .sillas-video-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 2rem 2.5rem;
          margin: 0 auto;
        }

        .silla-video-card {
          position: relative;
          aspect-ratio: 3/4;
          border-radius: 1.2rem;
          overflow: hidden;
          cursor: pointer;
          transition: all 0.3s ease;
          border: 2px solid rgba(255, 255, 255, 0.1);
          background: rgba(0, 0, 0, 0.5);
        }

        .silla-video-card:hover {
          transform: scale(1.03);
          border-color: rgba(95, 164, 255, 0.6);
          box-shadow: 0 10px 25px rgba(95, 164, 255, 0.3);
        }

        .silla-video {
          width: 100%;
          height: 100%;
          object-fit: cover;
          transition: transform 0.4s ease;
        }

        .silla-video-overlay {
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
          padding: 2rem;
          transform: translateY(100%);
          transition: transform 0.4s ease;
        }

        /* TODAS LAS SILLAS - Texto siempre visible */
        .silla-video-overlay {
          transform: translateY(0) !important;
          background: linear-gradient(transparent 30%, rgba(0, 0, 0, 0.9));
        }

        .silla-video-card:hover .silla-video-overlay {
          background: linear-gradient(transparent 20%, rgba(0, 0, 0, 0.95));
        }

        .silla-title {
          color: #fff;
          font-size: 1.8rem;
          font-weight: 700;
          margin-bottom: 0.5rem;
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .silla-play-icon {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 60px;
          height: 60px;
          background: rgba(255, 255, 255, 0.9);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          opacity: 0;
          transition: all 0.4s ease;
        }

        .silla-video-card:hover .silla-play-icon {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1.1);
        }

        .silla-play-icon::after {
          content: "▶";
          font-size: 2rem;
          color: #000;
          margin-left: 3px;
        }

        /* ===== RESPONSIVE DOS COLUMNAS VERTICAL ===== */
        @media screen and (max-width: 767px) {
          .sillas-grid-section {
            padding: 4rem 1rem 3rem 1rem;
          }
          
          .sillas-video-grid {
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem 1rem;
          }
          
          .silla-video-card {
            aspect-ratio: 3/4;
            border-radius: 1rem;
          }
          
          .sillas-grid-title {
            font-size: 2.4rem;
          }
          
          .silla-title {
            font-size: 1.4rem;
          }
          
          .silla-video-overlay {
            padding: 1.5rem;
          }
        }

        @media screen and (min-width: 768px) and (max-width: 991px) {
          .sillas-video-grid {
            grid-template-columns: 1fr 1fr;
            gap: 1.8rem 2rem;
          }
          
                     .sillas-grid-container {
             max-width: 650px;
           }
        }

        @media screen and (min-width: 992px) {
          .sillas-video-grid {
            grid-template-columns: 1fr 1fr;
            gap: 2.5rem 3rem;
          }
          
          .sillas-grid-title {
            font-size: 3.8rem;
          }
          
                     .sillas-grid-container {
             max-width: 850px;
          }
        }
      </style>
    </div>

    <div class="navbar-sticky">
      <div class="padding-global is_full-height">
        <div class="container-large is_full-height">
          <div class="navbar-sticky__wrapper">
            <a href="index.html" class="navbar-sticky__heading">
              <img src="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/Asset%2019supreme%20(1).png" alt="Raper Logo" class="navbar-logo">
            </a>
            <div class="navbar-sticky__links-wrapper">
              <div class="nav-links">
                <a href="index.html" class="navbar-sticky__link">Inicio</a>
                <a href="store.html" class="navbar-sticky__link">Tienda</a>
                <a href="careers.html" class="navbar-sticky__link">Trabaja con Nosotros</a>
              </div>
            </div>
            <!-- Navbar Actions -->
            <div class="navbar-actions">
              <div class="cart-icon-wrapper" onclick="showCart()">
                <svg class="cart-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 22C9.55228 22 10 21.5523 10 21C10 20.4477 9.55228 20 9 20C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M20 22C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20C19.4477 20 19 20.4477 19 21C19 21.5523 19.4477 22 20 22Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M1 1H5L7.68 14.39C7.77144 14.8504 8.02191 15.264 8.38755 15.5583C8.75318 15.8526 9.2107 16.009 9.68 16H19.4C19.8693 16.009 20.3268 15.8526 20.6925 15.5583C21.0581 15.264 21.3086 14.8504 21.4 14.39L23 6H6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div id="cart-count">0</div>
              </div>
              <!-- Mobile Menu Button -->
              <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="navbar-sticky__background"></div>
          
      <!-- Mobile Menu -->
      <div class="mobile-menu" id="mobile-menu">
        <div class="mobile-menu-links">
          <a href="index.html" class="mobile-menu-link">Inicio</a>
          <a href="store.html" class="mobile-menu-link">Tienda</a>
          <a href="careers.html" class="mobile-menu-link">Trabaja con Nosotros</a>
        </div>
        <div class="mobile-menu-contact">
          <div class="contact-item">
            <span class="flag">🇺🇸</span>
            <span class="phone">+1 (786) 978•1978</span>
          </div>
          <div class="contact-item">
            <span class="flag">🇦🇷</span>
            <span class="phone">+54 9 11 3422•6971</span>
          </div>
        </div>
      </div>
    </div>
    
    <main class="main-wrapper">
      <div class="sillas-grid-section">
        <div class="sillas-grid-container">
          <div class="sillas-grid-header">
            <h1 class="sillas-grid-title">COLECCIÓN SILLAS RAPER</h1>
          </div>
          
          <div class="sillas-video-grid">
            <!-- NICKI NICOLE Edition - VISIBLE INMEDIATAMENTE -->
            <div class="silla-video-card" onclick="goToProduct('silla-milkmakers.html')">
              <video class="silla-video priority-video" autoplay muted loop preload="auto" playsinline poster="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/silla_1%20(2).png">
                <source src="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/azul_girando.mp4" type="video/mp4">
              </video>
              <div class="silla-play-icon"></div>
              <div class="silla-video-overlay">
                <h3 class="silla-title">NICKI NICOLE,<br>EDICION NAIKI</h3>
              </div>
            </div>

            <!-- ERICK BELTRAN Edition - VISIBLE INMEDIATAMENTE -->
            <div class="silla-video-card" onclick="goToProduct('silla-erick.html')">
              <video class="silla-video priority-video" autoplay muted loop preload="auto" playsinline poster="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/detalle_silla1.jpg">
                <source src="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/madera_girando.mp4" type="video/mp4">
              </video>
              <div class="silla-play-icon"></div>
              <div class="silla-video-overlay">
                <h3 class="silla-title">ERICK BELTRAN</h3>
              </div>
            </div>

            <!-- SUPREME Edition - CARGA INTELIGENTE -->
            <div class="silla-video-card" onclick="goToProduct('silla-supreme.html')">
              <video class="silla-video lazy-video" autoplay muted loop preload="metadata" playsinline poster="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/detalle_silla2.jpg">
                <source src="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/rojo_girando.mp4" type="video/mp4">
              </video>
              <div class="silla-play-icon"></div>
              <div class="silla-video-overlay">
                <h3 class="silla-title">SUPREME</h3>
              </div>
            </div>

            <!-- PERRO PRIMO Edition - CARGA INTELIGENTE -->
            <div class="silla-video-card" onclick="goToProduct('silla-perro-primo.html')">
              <video class="silla-video lazy-video" autoplay muted loop preload="metadata" playsinline poster="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/perro%20primo.jpg">
                <source src="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/rosa_girando.mp4" type="video/mp4">
              </video>
              <div class="silla-play-icon"></div>
              <div class="silla-video-overlay">
                <h3 class="silla-title">PERRO PRIMO</h3>
              </div>
            </div>

            <!-- EDICION RAPER CARNAL - CARGA INTELIGENTE -->
            <div class="silla-video-card" onclick="goToProduct('silla-tracy.html')">
              <video class="silla-video lazy-video" autoplay muted loop preload="metadata" playsinline poster="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/tracy%201.jpg">
                <source src="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/verde_girando.mp4" type="video/mp4">
              </video>
              <div class="silla-play-icon"></div>
              <div class="silla-video-overlay">
                <h3 class="silla-title">EDICION RAPER CARNAL</h3>
              </div>
            </div>

            <!-- PERSONALIZA TU SILLA -->
            <div class="silla-video-card" onclick="goToProduct('silla-personalizar.html')">
              <img class="silla-video" src="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/silla..png" alt="Personaliza tu silla" style="object-fit: cover; width: 100%; height: 100%;">
              <div class="silla-play-icon"></div>
              <div class="silla-video-overlay">
                <h3 class="silla-title">PERSONALIZA<br>TU SILLA</h3>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer Minimalista -->
    <footer class="footer-minimal">
      <div class="footer-container">
        <div class="footer-content">
          <div class="footer-logo">
            <img src="https://pub-573f900cac3744cfbb3b1f02894f7042.r2.dev/Asset%2019supreme%20(1).png" alt="RAPER" class="footer-logo-img">
          </div>
          <div class="footer-tagline">
            <p>EXCLUSIVIDAD • MISTERIO • LUJO</p>
          </div>
          <div class="footer-contact">
            <div class="contact-item">
              <span class="flag">🇺🇸</span>
              <span class="phone">+1 (786) 978•1978</span>
            </div>
            <div class="contact-item">
              <span class="flag">🇦🇷</span>
              <span class="phone">+54 9 11 3422•6971</span>
            </div>
          </div>
          <div class="footer-copyright">
            <p>&copy; 2025 RAPER COMPANY. Todos los derechos reservados.</p>
          </div>
        </div>
      </div>
    </footer>

  </div>

  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=68269b7b12f8a3ad86be7d56" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script src="js/cart.js" type="text/javascript"></script>
  <script src="js/theme.js" type="text/javascript"></script>
  <script src="js/mobile-cart-fixes.js" type="text/javascript"></script>

  <div id="side-cart-container" class="side-cart-container">
    <div id="side-cart-overlay" class="side-cart-overlay"></div>
    <div id="side-cart" class="side-cart">
      <button id="close-cart-btn" class="close-cart-btn">&times;</button>
      <div id="side-cart-content" class="side-cart-content">
        <p>Cargando carrito...</p>
      </div>
    </div>
  </div>

  <script>
    // Función para navegar a productos específicos
    function goToProduct(url) {
      const card = event.currentTarget;
      
      // Efecto visual
      card.style.transform = 'scale(0.98)';
      card.style.opacity = '0.8';
      
      setTimeout(() => {
        window.location.href = url;
      }, 200);
    }

    // Inicialización
    document.addEventListener('DOMContentLoaded', function() {
      // ===== MANEJO AVANZADO DE VIDEOS ANTI-FLASH =====
      function initializeVideos() {
        const videos = document.querySelectorAll('.silla-video');
        console.log(`🎥 Inicializando ${videos.length} videos (anti-flash optimized)`);
        
        videos.forEach((video, index) => {
          // Configuración móvil mejorada
          video.setAttribute('playsinline', '');
          video.setAttribute('webkit-playsinline', '');
          video.setAttribute('muted', '');
          video.setAttribute('autoplay', '');
          video.muted = true;
          
          // OPTIMIZACIÓN ANTI-FLASH: Preload inteligente
          video.setAttribute('preload', 'metadata'); // Solo metadatos inicialmente
          
          // CSS para transición suave (sin cambiar diseño)
          video.style.transition = 'opacity 0.3s ease-in-out';
          video.style.opacity = '0.8'; // Ligeramente transparente hasta que cargue
          
          // ESTRATEGIA MÚLTIPLE: Varios eventos para capturar momento exacto
          let hasPlayed = false;
          let isVideoReady = false;
          
          // 1. Evento más temprano - cuando puede empezar a reproducir
          video.addEventListener('canplay', function() {
            if (!hasPlayed && !isVideoReady) {
              console.log(`⚡ Video ${index + 1} listo (canplay)`);
              isVideoReady = true;
              attemptPlay(video, index);
            }
          });
          
          // 2. Evento más seguro - cuando tiene suficientes datos
          video.addEventListener('canplaythrough', function() {
            if (!hasPlayed) {
              console.log(`🎬 Video ${index + 1} completamente listo (canplaythrough)`);
              attemptPlay(video, index);
            }
          });
          
          // 3. Fallback con delay mínimo
          video.addEventListener('loadeddata', function() {
            if (!hasPlayed) {
              console.log(`📊 Video ${index + 1} datos cargados (loadeddata)`);
              // Delay mínimo para evitar race condition
              setTimeout(() => attemptPlay(video, index), 50);
            }
          });
          
          // Función optimizada para reproducir
          function attemptPlay(video, index) {
            if (hasPlayed) return;
            hasPlayed = true;
            
            const playPromise = video.play();
            if (playPromise !== undefined) {
              playPromise.then(() => {
                console.log(`✅ Video ${index + 1} reproduciendo - transición suave`);
                // Transición suave a opacidad completa
                video.style.opacity = '1';
              }).catch(error => {
                console.log(`⚠️ Autoplay bloqueado para video ${index + 1}: ${error.message}`);
                // Mantener opacidad para que se vea el poster
                video.style.opacity = '1';
                hasPlayed = false; // Permitir retry
              });
            }
          }
          
          // Manejo de errores
          video.addEventListener('error', function(e) {
            console.error(`❌ Error video ${index + 1}:`, e);
            video.style.opacity = '1'; // Mostrar poster en caso de error
            hasPlayed = false;
          });
          
          // INTERSECTION OBSERVER AGRESIVO - Preload inteligente
          if ('IntersectionObserver' in window) {
            const observer = new IntersectionObserver((entries) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  // Cambiar a preload completo cuando entra en vista
                  if (video.getAttribute('preload') !== 'auto') {
                    video.setAttribute('preload', 'auto');
                    console.log(`👁️ Video ${index + 1} visible - preload completo activado`);
                  }
                  
                  // Intentar reproducir si no está corriendo
                  if (video.paused && !hasPlayed) {
                    const playPromise = video.play();
                    if (playPromise !== undefined) {
                      playPromise.catch(error => {
                        console.log(`📱 Autoplay restringido móvil - video ${index + 1}`);
                      });
                    }
                  }
                }
              });
            }, { 
              threshold: 0.1, // Detectar al 10% visible (más temprano)
              rootMargin: '150px' // Preload 150px antes de ser visible
            });
            
            observer.observe(video);
          }
          
          // OPTIMIZACIÓN INICIAL: Detectar si está en viewport
          const videoRect = video.getBoundingClientRect();
          const isInViewport = videoRect.top < window.innerHeight && videoRect.bottom > 0;
          
          if (isInViewport) {
            console.log(`📺 Video ${index + 1} en viewport - preload inmediato`);
            video.setAttribute('preload', 'auto');
            video.load();
          } else {
            // Fuera de vista - solo metadatos para ahorrar ancho de banda
            video.load();
          }
        });
      }
      
      // Ejecutar inicialización optimizada
      initializeVideos();

      // Efectos de animación para las tarjetas
      const videoCards = document.querySelectorAll('.silla-video-card');
      
      // Animación de entrada escalonada
      videoCards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(50px) scale(0.9)';
        card.style.transition = 'all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
        
        setTimeout(() => {
          card.style.opacity = '1';
          card.style.transform = 'translateY(0) scale(1)';
        }, 200 + (index * 100));
      });

      // Cart counter
      const cart = JSON.parse(localStorage.getItem('raperCart')) || [];
      const cartCount = document.getElementById('cart-count');
      if (cartCount) {
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        cartCount.textContent = totalItems;
      }

      // Mobile Menu Toggle
      const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
      const mobileMenu = document.getElementById('mobile-menu');
      const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');
      
      if (mobileMenuToggle && mobileMenu) {
        mobileMenuToggle.addEventListener('click', function() {
          mobileMenuToggle.classList.toggle('active');
          mobileMenu.classList.toggle('active');
          document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
        });
        
        mobileMenuLinks.forEach(link => {
          link.addEventListener('click', function() {
            mobileMenuToggle.classList.remove('active');
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
          });
        });
        
        document.addEventListener('click', function(e) {
          if (!mobileMenu.contains(e.target) && !mobileMenuToggle.contains(e.target) && mobileMenu.classList.contains('active')) {
            mobileMenuToggle.classList.remove('active');
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
          }
        });
      }
    });
  </script>

</body>
</html> 